<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=750"/>
		<title></title>
	</head>
	<body>
		<p style="width: 300px;white-space: nowrap;text-overflow: ellipsis;overflow: hidden;">02	      省略我吧！03	      省略我吧！	      省略我吧！05	      省略我吧！06	      省略我吧！07	      省略我吧！08	      省略我吧！	      省略我吧！10	      省略我吧！11	      省略我吧！12	      省略我吧！13	      省略我吧！14	 </p>
		<dic class="js_cut_str"><p id="cut_str" >超过的文字用省略号代替的js写法</p></dic>
		<p id="txt" style="line-height: 20px;">dasdasdas</p>
		<script type="text/javascript">
			var liH=document.getElementById("txt").style.lineHeight;
			console.log(liH);
//			块作用域
//			let a = 1;
//			if(true){
//				let b = 2;
//			}
			var a = 1;
			if(true){
				var b = 2;
			}	
			console.log(a);
			console.log(b);

//set和Map对象
			//es6
//			let collection = new Set();
//			collection.add(1);
//			collection.add(2);
//			collection.add(1);
			//es5
//			var collection = [];
//			collection.push(1,2,1);
//			console
//			console.log(collection);
//			
//			function addToCollection(collection,value){
//				if(collection.indexOf(value)<0){
//					collection.push(value);
//				}
//			}
			
			//map
			//es5
//			var collection = {};
//			collection.a = 'abc';
//			collection.b = 'xyz';
//			collection.forEach(function(value,key){
//				console.log(key+":"+value);
//			});
//			console.log(collection.size);
			
			
			//超过的用省略号代替
			function cutString(str,len){
				//length属性读出来的汉字长度为1
				if(str.length*2<len){
					return str;
				}
				var strlen = 0;
				var s = "";
				for(var i = 0;i<str.length;i++){
					s = s+str.charAt(i);
					if(str.charCodeAt(i)>128){
						strlen = strlen + 2;
						if(strlen>=len){
							return s.substring(0,s.length-1)+"<img src='img/logo.png'/>";
						}
					}else{
						strlen = strlen + 1;
						if(strlen >= len){
							return s.substring(0,s.length-2)+"<img src='img/logo.png'/>";
						}
					}
				}
				return s;
			}
			window.onload = function(){
				var str = document.getElementById("cut_str").innerHTML;
				var s = cutString(str,30);
				document.getElementById("cut_str").innerHTML=s;
				if(s){
					var img=cut_str.getElementsByTagName("img")[0];
					img.onclick=function(){
//						alert(0);
						document.getElementById("cut_str").innerHTML=str;
					}
				}
			}
		</script>
	</body>
</html>
